MongoDB 기본 명령어
MongoDB에서 가장 기본적인 데이터를 다루는 CRUD가 있다.

1. Create (생성)
새로운 문서를 컬렉션에 추가하는 작업입니다.

메서드: db.collection.insertOne() 또는 db.collection.insertMany()

단일 문서를 추가하는 법

JavaScript

db.users.insertOne({
	name: "Moon",
	age: 30, // 이름이 Moon 나이는 30 을 추가해라
});
여러 문서 추가하는 법

JavaScript

db.users.insertMany([
	{ name: "Moon", age: 30 },
	{ name: "go", age: 15 }
]);
2. Read (조회)
컬렉션에서 원하는 문서를 검색하는 작업입니다.

메서드: db.collection.find() 또는 db.collection.findOne()

모든 문서 조회

JavaScript

db.users.find(); // 전체 조회
db.users.find({name: "moongo"}); // 이름이 moongo인 사람을 찾아라
db.users.findOne({age: {$gt: 25}}); // 나이가 25 초과인 사람 ($gt는 초과)
3. Update (수정)
기존 문서의 데이터를 변경하는 작업입니다.

메서드: db.collection.updateOne() 또는 db.collection.updateMany()

단일 문서 수정

JavaScript

// 이름이 "Moon"인 문서의 나이를 31로 변경
db.users.updateOne(
	{ name: "Moon" }, // 조건
	{ $set: { age: 31 } } // 변경할 내용
);
여러 문서 수정

JavaScript

// 모든 'status'가 "active"인 문서의 status를 "online"으로 변경
db.users.updateMany(
	{ status: "active" }, // 조건
	{ $set: { status: "online" } } // 변경할 내용
);
4. Delete (삭제)
컬렉션에서 문서를 제거하는 작업입니다.

메서드: db.collection.deleteOne() 또는 db.collection.deleteMany()

단일 문서 삭제

JavaScript

db.users.deleteOne({ name: "Moon" }); // 이름이 "Moon"인 문서 중 첫 번째 문서 삭제
여러 문서 삭제

JavaScript

db.users.deleteMany({ age: { $lt: 20 } }); // 나이가 20보다 작은 모든 문서 삭제 ($lt: 작다)
MongoDb의 기본 연산자들
비교 연산자
| 연산자 | 의미 | 예시 |
|:---|:---|:---|
| $eq | 같다 | { age: { $eq: 25 } } |
| $ne | 같지 않다 | { status: { $ne: "ACTIVE" } } |
| $gt | 크다(초과) | { age: { $gt: 25 } } |
| $gte | 크거나 같다 | { age: { $gte: 25 } } |
| $lt | 작다(미만) | { age: { $lt: 30 } } |
| $lte | 작거나 같다 | { age: { $lte: 30 } } |
| $in | 배열에 포함 | { dept: { $in: ["SALES", "HR"] } } |
| $nin | 배열에 미포함 | { dept: { $nin: ["TEMP", "INTERN"] } } |

논리 연산자
| 연산자 | 예시 |
|:---|:---|
| $and | { $and: [ { age: { $gte: 20 } }, { age: { $lte: 30 } } ] } |
| $or | { $or: [ { role: "DEV" }, { role: "DATA" } ] } |
| $nor | { $nor: [ { status: "ACTIVE" }, { status: "PENDING" } ] } |
| $not | { score: { $not: { $gte: 60 } } } |

존재/타입 검사
| 연산자 | 예시 |
|:---|:---|
| $exists | { commission: { $exists: true } } |
| $type | { age: { $type: "number" } } |

배열 연산
| 연산자 | 예시 |
|:---|:---|
| $all | { tags: { $all: ["java", "backend"] } } |
| $size | { tags: { $size: 3 } } |
| $elemMatch| { scores: { $elemMatch: { subject: "math", score: { $gte: 90 } } } }|

갱신(Update)용 자주 쓰는 연산자
| 연산자 | 예시 |
|:---|:---|
| $set | { $set: { status: "ACTIVE" } } |
| $unset| { $unset: { tempField: "" } } |
| $inc | { $inc: { salary: 100 } } |
| $push | { $push: { tags: "new" } } |
| $addToSet| { $addToSet: { tags: "unique" } } |
| $pull | { $pull: { tags: "old" } } |
